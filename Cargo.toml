[package]
name = "avml"
version = "0.4.1"
license = "MIT"
description = "A portable volatile memory acquisition tool"
authors = ["avml@microsoft.com"]
keywords = ["linux", "memory-forensics", "security"]
categories = ["command-line-utilities"]
homepage = "https://github.com/microsoft/avml"
repository = "https://github.com/microsoft/avml"
readme = "README.md"
edition = "2021"

[features]
default = ["put", "blobstore"]
put = ["reqwest", "url", "tokio"]
blobstore = ["url", "azure_core", "azure_storage", "tokio", "tokio-util", "backoff"]

[dependencies]
bytes = "1.1"
elf = "0.0.10"
byteorder = "1.3"
argh = "0.1"
snap = "1.0"
futures = "0.3"
url = { version = "2.2", optional = true }
tokio-util = { version = "0.6", features = ["codec"] , optional = true }
tokio = { version = "1.0", default-features = false, optional = true, features = ["fs"] }
reqwest = { version = "0.11", default-features = false, features = ["rustls-tls"], optional = true}
anyhow = "1.0"
md5 = "0.7"
backoff = { version = "0.3", features = ["tokio"], optional = true}

azure_storage = { git = "https://github.com/azure/azure-sdk-for-rust", default-features = false, features = ["enable_reqwest_rustls", "account", "blob"], optional = true }
azure_core= { git = "https://github.com/azure/azure-sdk-for-rust", default-features= false, features = ["enable_reqwest_rustls"], optional = true }

[profile.release]
opt-level="z"
lto=true
panic="abort"

[[bin]]
name = "avml-upload"
required-features = ["put", "blobstore"]
