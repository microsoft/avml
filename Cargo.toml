[package]
name = "avml"
version = "0.8.0"
license = "MIT"
description = "A portable volatile memory acquisition tool"
authors = ["avml@microsoft.com"]
keywords = ["linux", "memory-forensics", "security"]
categories = ["command-line-utilities"]
homepage = "https://github.com/microsoft/avml"
repository = "https://github.com/microsoft/avml"
readme = "README.md"
edition = "2021"

[features]
default = ["put", "blobstore"]
put = ["reqwest", "url", "tokio", "native-tls"]
blobstore = ["url", "azure_core", "azure_storage", "azure_storage_blobs", "tokio", "tokio-util", "async-channel", "native-tls"]
status = ["atty", "indicatif"]

[dependencies]
bytes = "1.2"
elf = "0.0.11"
byteorder = "1.3"
clap = { version = "4.0.8", default-features = false, features=["derive", "std", "usage", "error-context", "help"]}
http = "0.2"
snap = "1.0"
futures = "0.3"
url = { version = "2.3", optional = true }
tokio-util = { version = "0.7", features = ["codec"] , optional = true }
tokio = { version = "1.21", default-features = false, optional = true, features = ["fs", "rt-multi-thread"] }
reqwest = { version = "0.11", optional = true}
thiserror = "1.0"
md5 = "0.7"
azure_storage = { version = "0.6", optional = true }
azure_storage_blobs = { version = "0.6", optional = true }
azure_core = { version = "0.5", optional = true }
async-channel = {version="1.7", optional=true}
atty = { version = "0.2", optional=true }
indicatif = { version = "0.17", optional=true }
native-tls = {version="0.2", features=["vendored"], optional=true}

[profile.release]
opt-level="z"
lto=true
panic="abort"
codegen-units=1

[[bin]]
name = "avml-upload"
required-features = ["put", "blobstore"]
